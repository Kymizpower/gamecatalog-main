{% extends 'base.html' %}
{% load static %}

{% block title %}GameCatalog - –ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<div class="hero-section mb-5">
    <div class="p-5 text-center text-white rounded-3" style="
        background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                    url('https://png.pngtree.com/background/20230607/original/pngtree-collection-of-retro-games-and-accessories-are-on-a-pink-background-picture-image_2902819.jpg');
        background-size: cover;
        background-position: center;
        border: none;
    ">
        <h1 class="display-4">üéÆ GameCatalog</h1>
        <p class="lead">–ö—Ä—É–ø–Ω–µ–π—à–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –∏–≥—Ä –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º</p>
        <a href="{% url 'game_list' %}" class="btn btn-primary btn-lg mt-3">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∏–≥—Ä—ã</a>
    </div>
</div>

<h2 class="mb-4">üî• –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–≥—Ä—ã</h2>

{% if games %}
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
    {% for game in games %}
    <div class="col">
        <div class="card h-100 shadow-sm game-card">
            {% if game.image %}
            <img src="{{ game.image.url }}" class="card-img-top" alt="{{ game.title }}" style="height: 200px; object-fit: cover;">
            {% else %}
            <img src="{% static 'images/no-image.jpg' %}" class="card-img-top" alt="–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" style="height: 200px; object-fit: cover;">
            {% endif %}
            
            <div class="card-body d-flex flex-column">
                <div class="d-flex justify-content-between align-items-start mb-2">
                    <h5 class="card-title mb-0">{{ game.title }}</h5>
                    {% if game.metacritic_score %}
                    <span class="badge {% if game.metacritic_score >= 80 %}bg-success{% elif game.metacritic_score >= 60 %}bg-warning{% else %}bg-danger{% endif %}">
                        {{ game.metacritic_score }}
                    </span>
                    {% endif %}
                </div>
                
                <span class="badge bg-info mb-2" style="width: fit-content;">{{ game.genre }}</span>
                
                <p class="card-text text-muted small mb-3">{{ game.short_description|truncatechars:100 }}</p>
                
                <div class="mt-auto">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <span class="h5 mb-0">
                                {% if game.price > 0 %}
                                {{ game.price }} ‚ÇΩ
                                {% else %}
                                –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
                                {% endif %}
                            </span>
                        </div>
                        <div>
                            <span class="badge bg-secondary">{{ game.platform }}</span>
                        </div>
                    </div>
                    
                    <a href="{{ game.get_absolute_url }}" class="btn btn-outline-primary w-100">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                </div>
            </div>
            
            <div class="card-footer bg-transparent border-top-0">
                <small class="text-muted">
                    <i class="bi bi-controller"></i> {{ game.developer }} 
                    {% if game.release_date %}
                    | <i class="bi bi-calendar3"></i> {{ game.release_date|date:"Y" }}
                    {% endif %}
                </small>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="alert alert-info text-center">
    <h4>–ò–≥—Ä –ø–æ–∫–∞ –Ω–µ—Ç –≤ –∫–∞—Ç–∞–ª–æ–≥–µ</h4>
    <p>–î–æ–±–∞–≤—å—Ç–µ –∏–≥—Ä—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å!</p>
    <a href="/admin/catalog/game/add/" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é –∏–≥—Ä—É</a>
</div>
{% endif %}

<div class="row mt-5">
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"><i class="bi bi-newspaper"></i> –ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</h5>
                <p class="card-text">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –∏–≥—Ä–æ–≤–æ–≥–æ –º–∏—Ä–∞</p>
                <a href="{% url 'news_list' %}" class="btn btn-outline-secondary">–ß–∏—Ç–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏</a>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"><i class="bi bi-chat-dots"></i> –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏</h5>
                <p class="card-text">–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è?</p>
                <a href="{% url 'contacts' %}" class="btn btn-outline-secondary">–ù–∞–ø–∏—Å–∞—Ç—å –Ω–∞–º</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.game-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: none;
}
.game-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
}
</style>
{% endblock %}